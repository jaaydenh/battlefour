<!DOCTYPE html><html><head><title>BattleFour</title><style>html, body { height: 100%; background: #000; }
html, body, ul, ol, li, form, fieldset, legend { margin: 0; padding: 0; }
div { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; -ms-box-sizing: border-box; }
h1, h2, h3, h4, h5, h6, p { margin-top: 0; }
fieldset, img { border: 0; }
legend { color: #000; }
li { list-style: none; }
sup { vertical-align: text-top; }
sub { vertical-align: text-bottom; }
table { border-collapse: collapse; border-spacing: 0; }
caption, th, td { text-align: left; vertical-align: top; font-weight: normal; }
input, textarea, select { font-size: 110%; line-height: 1.1; }
abbr, acronym { border-bottom: .1em dotted; cursor: help; }
body { font-family: Helvetica, Tahoma; }
body, div, span {
	-webkit-tap-highlight-color: rgba(0,0,0,0);
	-webkit-user-select: none;
}
</style></head><body></body><script>IMG_CACHE={"spritesheets/map.json":"{\"resources/splash/portrait2048.png\":{},\"resources/images/buttons/red_button.png\":{\"group\":\"resources-images-buttons\",\"marginTop\":0,\"y\":210,\"marginBottom\":0,\"x\":2,\"sheet\":\"spritesheets/resources-images-buttons0.png\",\"marginRight\":0,\"sheetSize\":[256,512],\"h\":64,\"marginLeft\":0,\"scale\":1,\"w\":154},\"resources/splash/portrait1136.png\":{},\"resources/splash/landscape768.png\":{},\"resources/icons/icon512.png\":{},\"resources/images/red_piece.png\":{\"group\":\"resources-images\",\"marginTop\":2,\"y\":426,\"marginBottom\":2,\"x\":2,\"sheet\":\"spritesheets/resources-images0.png\",\"marginRight\":1,\"sheetSize\":[512,1024],\"h\":96,\"marginLeft\":3,\"scale\":1,\"w\":96},\"resources/images/ui/buttonItem.png\":{\"group\":\"resources-images-ui\",\"marginTop\":6,\"y\":172,\"marginBottom\":3,\"x\":140,\"sheet\":\"spritesheets/resources-images-ui0.png\",\"marginRight\":3,\"sheetSize\":[256,512],\"h\":61,\"marginLeft\":6,\"scale\":1,\"w\":61},\"resources/splash/portrait480.png\":{},\"resources/images/grid_background.png\":{\"group\":\"resources-images\",\"marginTop\":0,\"y\":2,\"marginBottom\":0,\"x\":2,\"sheet\":\"spritesheets/resources-images0.png\",\"marginRight\":0,\"sheetSize\":[512,1024],\"h\":420,\"marginLeft\":0,\"scale\":1,\"w\":420},\"resources/splash/portrait960.png\":{},\"resources/images/ui/menuBackground.png\":{\"group\":\"resources-images-ui\",\"marginTop\":0,\"y\":0,\"marginBottom\":0,\"x\":0,\"sheet\":\"spritesheets/resources-images-ui1.png\",\"marginRight\":0,\"sheetSize\":[1024,1024],\"h\":1024,\"marginLeft\":0,\"scale\":1,\"w\":576},\"resources/images/ui/background.png\":{\"group\":\"resources-images-ui\",\"marginTop\":6,\"y\":172,\"marginBottom\":3,\"x\":73,\"sheet\":\"spritesheets/resources-images-ui0.png\",\"marginRight\":3,\"sheetSize\":[256,512],\"h\":61,\"marginLeft\":4,\"scale\":1,\"w\":63},\"resources/icons/ios72.png\":{},\"resources/resources/images/red_piece.png\":{\"group\":\"resources-images\",\"marginTop\":2,\"y\":426,\"marginBottom\":2,\"x\":2,\"sheet\":\"spritesheets/resources-images0.png\",\"marginRight\":1,\"sheetSize\":[512,1024],\"h\":96,\"marginLeft\":3,\"scale\":1,\"w\":96},\"resources/images/ui/title.png\":{\"group\":\"resources-images-ui\",\"marginTop\":9,\"y\":242,\"marginBottom\":11,\"x\":2,\"sheet\":\"spritesheets/resources-images-ui0.png\",\"marginRight\":11,\"sheetSize\":[256,512],\"h\":50,\"marginLeft\":9,\"scale\":1,\"w\":50},\"resources/icons/android72.png\":{},\"resources/resources/images/blue_piece.png\":{\"group\":\"resources-images\",\"marginTop\":2,\"y\":426,\"marginBottom\":2,\"x\":102,\"sheet\":\"spritesheets/resources-images0.png\",\"marginRight\":1,\"sheetSize\":[512,1024],\"h\":96,\"marginLeft\":3,\"scale\":1,\"w\":96},\"resources/images/ui/button1Up.png\":{\"group\":\"resources-images-ui\",\"marginTop\":3,\"y\":172,\"marginBottom\":1,\"x\":2,\"sheet\":\"spritesheets/resources-images-ui0.png\",\"marginRight\":2,\"sheetSize\":[256,512],\"h\":66,\"marginLeft\":1,\"scale\":1,\"w\":67},\"resources/images/backgrounds/title.png\":{\"group\":\"resources-images-backgrounds\",\"marginTop\":0,\"y\":0,\"marginBottom\":0,\"x\":0,\"sheet\":\"spritesheets/resources-images-backgrounds0.png\",\"marginRight\":0,\"sheetSize\":[1024,1024],\"h\":1024,\"marginLeft\":0,\"scale\":1,\"w\":576},\"resources/icons/android96.png\":{},\"resources/images/ui/item.png\":{\"group\":\"resources-images-ui\",\"marginTop\":9,\"y\":242,\"marginBottom\":11,\"x\":56,\"sheet\":\"spritesheets/resources-images-ui0.png\",\"marginRight\":11,\"sheetSize\":[256,512],\"h\":50,\"marginLeft\":9,\"scale\":1,\"w\":50},\"resources/icons/metadata.json\":{},\"resources/images/ui/button2Up.png\":{\"group\":\"resources-images-ui\",\"marginTop\":3,\"y\":102,\"marginBottom\":1,\"x\":73,\"sheet\":\"spritesheets/resources-images-ui0.png\",\"marginRight\":2,\"sheetSize\":[256,512],\"h\":66,\"marginLeft\":1,\"scale\":1,\"w\":67},\"resources/images/buttons/black_button.png\":{\"group\":\"resources-images-buttons\",\"marginTop\":1,\"y\":278,\"marginBottom\":1,\"x\":2,\"sheet\":\"spritesheets/resources-images-buttons0.png\",\"marginRight\":2,\"sheetSize\":[256,512],\"h\":62,\"marginLeft\":1,\"scale\":1,\"w\":151},\"resources/images/ui/button3Up.png\":{\"group\":\"resources-images-ui\",\"marginTop\":3,\"y\":102,\"marginBottom\":1,\"x\":2,\"sheet\":\"spritesheets/resources-images-ui0.png\",\"marginRight\":2,\"sheetSize\":[256,512],\"h\":66,\"marginLeft\":1,\"scale\":1,\"w\":67},\"resources/icons/ios144.png\":{},\"resources/images/buttons/brown_button_up.png\":{\"group\":\"resources-images-buttons\",\"marginTop\":0,\"y\":2,\"marginBottom\":0,\"x\":2,\"sheet\":\"spritesheets/resources-images-buttons0.png\",\"marginRight\":0,\"sheetSize\":[256,512],\"h\":100,\"marginLeft\":0,\"scale\":1,\"w\":250},\"resources/splash/landscape1536.png\":{},\"resources/icons/ios57.png\":{},\"resources/resources/images/grid_background.png\":{\"group\":\"resources-images\",\"marginTop\":0,\"y\":2,\"marginBottom\":0,\"x\":2,\"sheet\":\"spritesheets/resources-images0.png\",\"marginRight\":0,\"sheetSize\":[512,1024],\"h\":420,\"marginLeft\":0,\"scale\":1,\"w\":420},\"resources/icons/ios114.png\":{},\"resources/icons/android36.png\":{},\"resources/images/ui/button1Down.png\":{\"group\":\"resources-images-ui\",\"marginTop\":3,\"y\":2,\"marginBottom\":0,\"x\":173,\"sheet\":\"spritesheets/resources-images-ui0.png\",\"marginRight\":2,\"sheetSize\":[256,512],\"h\":67,\"marginLeft\":1,\"scale\":1,\"w\":67},\"resources/splash/README.txt\":{},\"resources/images/ui/buttonBack.png\":{\"group\":\"resources-images-ui\",\"marginTop\":2,\"y\":242,\"marginBottom\":2,\"x\":164,\"sheet\":\"spritesheets/resources-images-ui0.png\",\"marginRight\":7,\"sheetSize\":[256,512],\"h\":36,\"marginLeft\":7,\"scale\":1,\"w\":26},\"resources/images/ui/gc96.png\":{\"group\":\"resources-images-ui\",\"marginTop\":0,\"y\":2,\"marginBottom\":0,\"x\":2,\"sheet\":\"spritesheets/resources-images-ui0.png\",\"marginRight\":0,\"sheetSize\":[256,512],\"h\":96,\"marginLeft\":0,\"scale\":1,\"w\":96},\"resources/images/buttons/orange_button.png\":{\"group\":\"resources-images-buttons\",\"marginTop\":1,\"y\":344,\"marginBottom\":0,\"x\":2,\"sheet\":\"spritesheets/resources-images-buttons0.png\",\"marginRight\":4,\"sheetSize\":[256,512],\"h\":63,\"marginLeft\":2,\"scale\":1,\"w\":148},\"resources/icons/android48.png\":{},\"resources/images/ui/button2Down.png\":{\"group\":\"resources-images-ui\",\"marginTop\":3,\"y\":102,\"marginBottom\":1,\"x\":144,\"sheet\":\"spritesheets/resources-images-ui0.png\",\"marginRight\":2,\"sheetSize\":[256,512],\"h\":66,\"marginLeft\":1,\"scale\":1,\"w\":67},\"resources/images/ui/button3Down.png\":{\"group\":\"resources-images-ui\",\"marginTop\":3,\"y\":2,\"marginBottom\":0,\"x\":102,\"sheet\":\"spritesheets/resources-images-ui0.png\",\"marginRight\":2,\"sheetSize\":[256,512],\"h\":67,\"marginLeft\":1,\"scale\":1,\"w\":67},\"resources/images/tap_area.png\":{\"group\":\"resources-images\",\"marginTop\":0,\"y\":426,\"marginBottom\":0,\"x\":202,\"sheet\":\"spritesheets/resources-images0.png\",\"marginRight\":0,\"sheetSize\":[512,1024],\"h\":90,\"marginLeft\":0,\"scale\":1,\"w\":90},\"resources/images/blue_piece.png\":{\"group\":\"resources-images\",\"marginTop\":2,\"y\":426,\"marginBottom\":2,\"x\":102,\"sheet\":\"spritesheets/resources-images0.png\",\"marginRight\":1,\"sheetSize\":[512,1024],\"h\":96,\"marginLeft\":3,\"scale\":1,\"w\":96},\"resources/images/buttons/brown_button_down.png\":{\"group\":\"resources-images-buttons\",\"marginTop\":0,\"y\":106,\"marginBottom\":0,\"x\":2,\"sheet\":\"spritesheets/resources-images-buttons0.png\",\"marginRight\":0,\"sheetSize\":[256,512],\"h\":100,\"marginLeft\":0,\"scale\":1,\"w\":250},\"resources/images/ui/contentBorder.png\":{\"group\":\"resources-images-ui\",\"marginTop\":0,\"y\":242,\"marginBottom\":0,\"x\":110,\"sheet\":\"spritesheets/resources-images-ui0.png\",\"marginRight\":0,\"sheetSize\":[256,512],\"h\":50,\"marginLeft\":0,\"scale\":1,\"w\":50},\"resources/images/ui/buttonClose.png\":{\"group\":\"resources-images-ui\",\"marginTop\":5,\"y\":102,\"marginBottom\":4,\"x\":215,\"sheet\":\"spritesheets/resources-images-ui0.png\",\"marginRight\":4,\"sheetSize\":[256,512],\"h\":31,\"marginLeft\":4,\"scale\":1,\"w\":32},\"resources/splash/portrait1024.png\":{},\"resources/splash/metadata.json\":{},\"resources/images/ui/gc48.png\":{\"group\":\"resources-images-ui\",\"marginTop\":0,\"y\":172,\"marginBottom\":0,\"x\":205,\"sheet\":\"spritesheets/resources-images-ui0.png\",\"marginRight\":0,\"sheetSize\":[256,512],\"h\":48,\"marginLeft\":0,\"scale\":1,\"w\":48}}"};;(function() {
window.BUILD_TARGET="native-ios";
window.BUILD_ENV="native";
window.DEBUG=true;
window.DEV_MODE=true;
window.CONFIG={"appID":"3819c51ed5104a6cb6e29721ae94a665","shortName":"BattleFour","title":"BattleFour","disableNativeViews":false,"target":"native-ios","servicesURL":"http://staging.api.gameclosure.com","noRedirect":true,"inviteURLTemplate":"http://192.168.1.4:9200/simulate/BattleFour/browser-desktop/?i={code}","splash":{"autoHide":true,"portrait480":"resources/splash/portrait480.png","portrait960":"resources/splash/portrait960.png","portrait1024":"resources/splash/portrait1024.png","portrait1136":"resources/splash/portrait1136.png","portrait2048":"resources/splash/portrait2048.png","landscape768":"resources/splash/landscape768.png","landscape1536":"resources/splash/landscape1536.png"},"useDOM":false,"packageName":"com.theshirtstoreonline.BattleFour","bundleID":"com.partytrollstudios.battlefour","sdkVersion":"unknown"};
window.CONFIG.baseURL = window.location.toString().match(/(.*\/).*$/)[1];
})();;function bootstrap(initialImport, target) {
	var w = window;
	var d = document;
	var loc = w.location;
	var q = loc.search + loc.hash;

	// check to see if we need chrome frame
	if (target && (target=="desktop" || target=="facebook") && /MSIE/i.test(navigator.userAgent) && !d.createElement('canvas').getContext) {
		var chromeframe_url = 'chromeframe.html' + (loc.search ? loc.search + "&" : "?") + "target="+ target;
		bootstrap = function() {};
		try {
			var obj = new ActiveXObject('ChromeTab.ChromeFrame');
			if (!obj) {
				throw "bad object";
			}
			loc.replace(chromeframe_url);
		} catch(e) {
			w.onload = function() {
				var e = d.createElement('script'); 
				e.async = true;
			    e.src = "http://ajax.googleapis.com/ajax/libs/chrome-frame/1/CFInstall.min.js";
				e.onreadystatechange= function () {
					if (this.readyState == 'loaded') {
						CFInstall.check({
							mode: "overlay",
							oninstall: function() { loc.replace(chromeframe_url) },
							url: "http://www.google.com/chromeframe/eula.html?user=true"
						});
					}
				}
				d.getElementsByTagName('head')[0].appendChild(e);
			}
		}
		return;
	}
	
	// for tracking when the page started loading
	w.__initialTime = +new Date();

	try {
		// override any config params provided already
		if (w.CONFIG_OVERRIDES) {
			for (var key in w.CONFIG_OVERRIDES) {
				w.CONFIG[key] = w.CONFIG_OVERRIDES[key];
			}
		}

		var uri = decodeURIComponent((w.location.search || '?').substr(1));
		if (uri[0] == '{') {
			// override any config params in the URL
			var overrideCONFIG = JSON.parse(uri);
			if (overrideCONFIG) {
				for (var key in overrideCONFIG) {
					w.CONFIG[key] = overrideCONFIG[key];
				}
			}
		}
	} catch(e) {
		
	}
	
	if (w.CONFIG.CDNURL) {
		d.write('<base href="' + w.CONFIG.CDNURL + '">');
	}
	
	// figure out the dpr
	if (w.CONFIG.scaleDPR === false) {
		var scale = 1;
	} else {
		var scale = (1 / (w.devicePixelRatio || 1));
	}

	// figure out the device type
	var ua = navigator.userAgent;
	var mobile = (/(iPod|iPhone|iPad)/i.test(ua) ? 'ios' : /BlackBerry/.test(ua) ? 'blackberry' : /Mobile Safari/.test(ua) ? 'android' : '');

	if (loc.search.match(/exportSettings=true/)) {
		// just export localStorage
		exportSettings();
	} else if (mobile != 'blackberry' && !w.CONFIG.noRedirect) {
		// redirect based on device
		if (mobile && target != 'browser-mobile') {
			return loc.replace('//' + loc.host + '/browser-mobile/' + loc.hash);
		} else if (!mobile && target == 'browser-mobile') {
			return loc.replace('//' + loc.host + '/browser-desktop/' + loc.hash);
		}
	}
	
	// set the viewport
	if (mobile == 'ios') {
		// Using initial-scale on android makes everything blurry! I think only IOS
		// correctly uses devicePixelRatio.  Medium/high-res android seems to set
		// the dpr to 1.5 across the board, regardless of what the dpr should actually
		// be...
		d.write('<meta name="viewport" content="'
				+ 'user-scalable=no'
				+ ',initial-scale=' + scale
				+ ',maximum-scale=' + scale
				+ ',minimum-scale=' + scale
				+ ',width=device-width'
			+ '" />');
	}
	
	if (!Image.get) {
		Image.set = function(url, img) { CACHE[url] = img; };
		Image.get = function(url) { return CACHE[url]; };
	}
	
	w.hideAddressBar = function() {
		if (!mobile) { return; }
		
		d.body.style.height = 2 * screen.height + 'px';
		if (mobile == 'ios') {
			w.scrollTo(0, 1);
			w.scrollTo(0, 0);
		} else {
			w.scrollTo(0, 1);
		}
		d.body.offsetHeight;
	}

	hideAddressBar();
	var min = w.innerHeight;

	var loaded = false;
	w._continueLoad = function() {
		if (!loaded) {
			loaded = true;
			var el = d.createElement('script');
			el.src = target + '.js';
			d.getElementsByTagName('head')[0].appendChild(el);
		}
	};

	// after load, we poll for the correct document height
	w.onload = function() {
		var now = +new Date();
		var increased = false;
		var poll = setInterval(function() {
			hideAddressBar();
			var h = w.innerHeight;
			
			// timeout after 100ms and assume we have the right height, or 
			// note when the height increases (we scrolled) and launch the app
			if (h == min && increased || +new Date() - now > 1000) {
				if (mobile == 'android') {
					w.scrollTo(0, -1);
				}

				clearInterval(poll);

				setTimeout(function () {
					jsio("import gc.browser.bootstrap.launchBrowser");
				}, 0);
			}

			// some android phones report correctly first, then shrink the height
			// to fit the address bar. always reset min
			if (h > min) { increased = true; }
			min = h;
		}, 50);
	}
}
;bootstrap("gc.browser.launchClient", "native-ios");jsio=function(){window._continueLoad()}</script></html>